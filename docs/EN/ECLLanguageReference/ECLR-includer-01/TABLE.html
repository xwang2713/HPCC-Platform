<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>TABLE</title><link rel="stylesheet" href="LN-html.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.75.1"><link rel="home" href="index.html" title="ECL Language Reference"><link rel="up" href="Built-in_Functions_and_Actions.html" title="Built-in Functions and Actions"><link rel="prev" href="SUM.html" title="SUM"><link rel="next" href="TAN.html" title="TAN"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">TABLE</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="SUM.html"><img src="images/prev.gif" alt="Prev"></a>&nbsp;</td><th width="60%" align="center"><span class="bold"><strong>Built-in Functions and Actions</strong></span></th><td width="20%" align="right">&nbsp;<a accesskey="n" href="TAN.html"><img src="images/next.gif" alt="Next"></a></td></tr></table><hr></div><div class="sect1" title="TABLE"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="TABLE"></a>TABLE</h2></div></div></div><p><span class="bold"><strong>TABLE<a class="indexterm" name="d0e30711"></a><a class="indexterm" name="d0e30714"></a>(</strong></span><span class="emphasis"><em>recordset, format</em></span><span class="bold"><strong> [</strong></span><span class="emphasis"><em>, expression</em></span><span class="bold"><strong> [</strong></span>,<span class="bold"><strong>FEW<a class="indexterm" name="d0e30729"></a> | MANY<a class="indexterm" name="d0e30733"></a>] [</strong></span>, <span class="bold"><strong>UNSORTED<a class="indexterm" name="d0e30740"></a>]] [</strong></span>, <span class="bold"><strong>LOCAL<a class="indexterm" name="d0e30747"></a>] [, KEYED<a class="indexterm" name="d0e30751"></a> ] [, MERGE<a class="indexterm" name="d0e30755"></a> ] [, SKEW<a class="indexterm" name="d0e30759"></a>(</strong></span><span class="emphasis"><em>limit</em></span><span class="bold"><strong>[</strong></span><span class="emphasis"><em>, target</em></span><span class="bold"><strong>] ) [, THRESHOLD<a class="indexterm" name="d0e30771"></a>(</strong></span><span class="emphasis"><em>size</em></span><span class="bold"><strong>) ] ] </strong></span><span class="bold"><strong>[, UNORDERED | ORDERED(</strong></span> <span class="emphasis"><em>bool </em></span><span class="bold"><strong>) ] [, STABLE | UNSTABLE ] [, PARALLEL [ (</strong></span> <span class="emphasis"><em>numthreads </em></span><span class="bold"><strong>) ] ] [, ALGORITHM(</strong></span> <span class="emphasis"><em>name </em></span><span class="bold"><strong>) ] )</strong></span></p><div class="informaltable"><table border="1"><colgroup><col width="14%"><col width="86%"></colgroup><tbody><tr><td><span class="emphasis"><em>recordset</em></span></td><td>The set of records to process. This may be the name of a dataset or a record set derived from some filter condition, or any expression that results in a derived record set.</td></tr><tr><td><span class="emphasis"><em>format</em></span></td><td>An output RECORD structure<a class="indexterm" name="d0e30814"></a> definition that defines the type, name, and source of the data for each field.</td></tr><tr><td><span class="emphasis"><em>expression</em></span></td><td>Optional. Specifies a "group by" clause. You may have multiple expressions separated by commas to create a single logical "group by" clause. If expression is a field of the recordset, then there is a single group record in the resulting table for every distinct value of the expression. Otherwise expression is a LEFT/RIGHT type expression in the DEDUP manner.</td></tr><tr><td><span class="bold"><strong>FEW</strong></span></td><td>Optional. Indicates that the expression will result in fewer than 10,000 distinct groups. This allows optimization to produce a significantly faster result.</td></tr><tr><td><span class="bold"><strong>MANY</strong></span></td><td>Optional. Indicates that the expression will result in many distinct groups.</td></tr><tr><td><span class="bold"><strong>UNSORTED</strong></span></td><td>Optional. Specifies that you don't care about the order of the groups. This allows optimization to produce a significantly faster result.</td></tr><tr><td><span class="bold"><strong>LOCAL</strong></span></td><td>Optional. Specifies the operation is performed on each supercomputer node independently, without requiring interaction with all other nodes to acquire data; the operation maintains the distribution of any previous DISTRIBUTE.</td></tr><tr><td><span class="bold"><strong>KEYED</strong></span></td><td>Optional. Specifies the activity is part of an index read operation, which allows the optimizer to generate optimal code for the operation.</td></tr><tr><td><span class="bold"><strong>MERGE</strong></span></td><td>Optional. Specifies that results are aggregated on each node and then the aggregated intermediaries are aggregated globally. This is a safe method of aggregation that shines particularly well if the underlying data was skewed. If it is known that the number of groups will be low then ,FEW will be even faster; avoiding the local sort of the underlying data.</td></tr><tr><td><span class="bold"><strong>SKEW</strong></span></td><td>Indicates that you know the data will not be spread evenly across nodes (will be skewed and you choose to override the default by specifying your own limit value to allow the job to continue despite the skewing.)</td></tr><tr><td><span class="emphasis"><em>limit</em></span></td><td>A value between zero (0) and one (1.0 = 100%) indicating the maximum percentage of skew to allow before the job fails (the default skew is 1.0 / &lt;number of slaves on cluster&gt;).</td></tr><tr><td><span class="emphasis"><em>target</em></span></td><td>Optional. A value between zero (0) and one (1.0 = 100%) indicating the desired maximum percentage of skew to allow (the default skew is 1.0 / &lt;number of slaves on cluster&gt;).</td></tr><tr><td><span class="bold"><strong>THRESHOLD</strong></span></td><td>Indicates the minimum size for a single part before the SKEW limit is enforced.</td></tr><tr><td><span class="emphasis"><em>size</em></span></td><td>An integer value indicating the minimum number of bytes for a single part. Default is 1GB.</td></tr><tr><td><span class="bold"><strong>UNORDERED</strong></span></td><td>Optional. Specifies the output record order is not significant.</td></tr><tr><td><span class="bold"><strong>ORDERED</strong></span></td><td>Specifies the significance of the output record order.</td></tr><tr><td><span class="emphasis"><em>bool</em></span></td><td>When False, specifies the output record order is not significant. When True, specifies the default output record order.</td></tr><tr><td><span class="bold"><strong>STABLE</strong></span></td><td>Optional. Specifies the input record order is significant.</td></tr><tr><td><span class="bold"><strong>UNSTABLE</strong></span></td><td>Optional. Specifies the input record order is not significant.</td></tr><tr><td><span class="bold"><strong>PARALLEL</strong></span></td><td>Optional. Try to evaluate this activity in parallel.</td></tr><tr><td><span class="emphasis"><em>numthreads</em></span></td><td>Optional. Try to evaluate this activity using <span class="emphasis"><em>numthreads</em></span> threads.</td></tr><tr><td><span class="bold"><strong>ALGORITHM</strong></span></td><td>Optional. Override the algorithm used for this activity.</td></tr><tr><td><span class="emphasis"><em>name</em></span></td><td>The algorithm to use for this activity. Must be from the list of supported algorithms for the SORT function's STABLE and UNSTABLE options.</td></tr><tr><td>Return:</td><td>TABLE returns a new table.</td></tr></tbody></table></div><p>The <span class="bold"><strong>TABLE </strong></span>function is similar to OUTPUT, but instead of writing records to a file, it outputs those records in a new table (a new dataset in the supercomputer), in memory. The new table is temporary and exists only while the specific query that invoked it is running.</p><p>The new table inherits the implicit relationality the <span class="emphasis"><em>recordset </em></span>has (if any), unless the optional <span class="emphasis"><em>expression</em></span> is used to perform aggregation. This means the parent record is available when processing table records, and you can also access the set of child records related to each table record. There are two forms of TABLE usage: the "Vertical Slice" form, and the "CrossTab Report" form.</p><p>For the "Vertical Slice" form, there is no <span class="emphasis"><em>expression</em></span> parameter specified. The number of records in the input <span class="emphasis"><em>recordset</em></span> is equal to the number of records produced.</p><p>For the "CrossTab Report" form there is usually an <span class="emphasis"><em>expression</em></span> parameter and, more importantly, the output <span class="emphasis"><em>format</em></span> RECORD structure<a class="indexterm" name="d0e30981"></a> contains at least one field using an aggregate function with the keyword GROUP as its first parameter. The number of records produced is equal to the number of distinct values of the <span class="emphasis"><em>expression</em></span>.</p><p>Example:</p><pre class="programlisting">//"vertical slice" form:
MyFormat := RECORD
STRING25 Lname := Person.per_last_name;
Person.per_first_name;
STRING5 NewField := '';
END;
PersonTable := TABLE(Person,MyFormat);
// adding a new field is one use of this form of TABLE


//"CrossTab Report" form:
rec := RECORD
Person.per_st;
StCnt := COUNT(GROUP);
END
Mytable := TABLE(Person,rec,per_st,FEW);
// group persons by state in Mytable to produce a
        crosstab
</pre><p>See Also: <a class="link" href="OUTPUT.html" title="OUTPUT">OUTPUT</a>, <a class="link" href="GROUP.html" title="GROUP keyword">GROUP</a>, <a class="link" href="DATASET.html" title="DATASET">DATASET</a>, <a class="link" href="RECORD_Structure.html" title="RECORD Structure">RECORD Structure</a></p></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="SUM.html"><img src="images/prev.gif" alt="Prev"></a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="Built-in_Functions_and_Actions.html"><img src="images/up.gif" alt="Up"></a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="TAN.html"><img src="images/next.gif" alt="Next"></a></td></tr><tr><td width="40%" align="left" valign="top">SUM&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html"><img src="images/home.gif" alt="Home"></a></td><td width="40%" align="right" valign="top">&nbsp;TAN</td></tr></table></div></body></html>