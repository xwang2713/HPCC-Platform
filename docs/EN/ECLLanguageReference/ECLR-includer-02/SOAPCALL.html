<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>SOAPCALL</title><link rel="stylesheet" href="LN-html.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.75.1"><link rel="home" href="index.html" title="ECL Language Reference"><link rel="up" href="Built-in_Functions_and_Actions.html" title="Built-in Functions and Actions"><link rel="prev" href="SIZEOF.html" title="SIZEOF"><link rel="next" href="SOAPCALL_Function.html" title="SOAPCALL Function"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">SOAPCALL</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="SIZEOF.html"><img src="images/prev.gif" alt="Prev"></a>&nbsp;</td><th width="60%" align="center"><span class="bold"><strong>Built-in Functions and Actions</strong></span></th><td width="20%" align="right">&nbsp;<a accesskey="n" href="SOAPCALL_Function.html"><img src="images/next.gif" alt="Next"></a></td></tr></table><hr></div><div class="sect1" title="SOAPCALL"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="SOAPCALL"></a>SOAPCALL<a class="indexterm" name="d0e29512"></a></h2></div></div></div><p><span class="emphasis"><em>result</em></span><span class="bold"><strong> := SOAPCALL<a class="indexterm" name="d0e29520"></a>( [ </strong></span><span class="emphasis"><em>recset, </em></span><span class="bold"><strong>]</strong></span><span class="emphasis"><em> url, service, instructure, </em></span><span class="bold"><strong>[ </strong></span><span class="emphasis"><em>transform, </em></span><span class="bold"><strong>]</strong></span><span class="bold"><strong> DATASET<a class="indexterm" name="d0e29538"></a>(</strong></span><span class="emphasis"><em>outstructure</em></span><span class="bold"><strong>) </strong></span><span class="emphasis"><em>| outstructure </em></span><span class="bold"><strong>[</strong></span><span class="emphasis"><em>, options </em></span><span class="bold"><strong>]</strong></span> <span class="bold"><strong>[, UNORDERED | ORDERED(</strong></span> <span class="emphasis"><em>bool </em></span><span class="bold"><strong>) ] [, STABLE | UNSTABLE ] [, PARALLEL [ (</strong></span> <span class="emphasis"><em>numthreads </em></span><span class="bold"><strong>) ] ] [, ALGORITHM(</strong></span> <span class="emphasis"><em>name </em></span><span class="bold"><strong>) ] );</strong></span></p><p><span class="bold"><strong>SOAPCALL( [ </strong></span><span class="emphasis"><em>recset, </em></span><span class="bold"><strong>]</strong></span><span class="emphasis"><em> url, service, instructure, </em></span><span class="bold"><strong>[ </strong></span><span class="emphasis"><em>transform, </em></span><span class="bold"><strong>]</strong></span><span class="emphasis"><em> </em></span><span class="bold"><strong>[</strong></span><span class="emphasis"><em> options </em></span><span class="bold"><strong>]</strong></span> <span class="bold"><strong>[, UNORDERED | ORDERED(</strong></span> <span class="emphasis"><em>bool </em></span><span class="bold"><strong>) ] [, STABLE | UNSTABLE ] [, PARALLEL [ (</strong></span> <span class="emphasis"><em>numthreads </em></span><span class="bold"><strong>) ] ] [, ALGORITHM(</strong></span> <span class="emphasis"><em>name </em></span><span class="bold"><strong>) ] );</strong></span></p><div class="informaltable"><table border="1"><colgroup><col width="21%"><col width="79%"></colgroup><tbody><tr><td><span class="emphasis"><em>result</em></span></td><td>The attribute name for the resulting recordset or single record.</td></tr><tr><td><span class="emphasis"><em>recset</em></span></td><td>Optional. The input recordset. If omitted, the single input record must be defined by default values for each field in the <span class="emphasis"><em>instructure</em></span> parameter.</td></tr><tr><td><span class="emphasis"><em>url</em></span></td><td>A string containing a pipe-delimited ( | ) list of URLs that host the service to invoke (may append repository module names). This is intended to provide a means for the client to conduct a Federated search where the request is sent to each of the target systems in the list. These URLs may contain standard form usernames and passwords, if required. The default username/password are those contained in the workunit. If calling an ESP Web service, you can append the ver_=n.nn parameter to specify the version of the service. For example: <pre class="programlisting">SOAPCALL('http://127.0.0.1:8010/Wsdfu/?ver_=1.22', 
         'DFUSearchData', 
         instructure,DATASET(outsructure));</pre></td></tr><tr><td><span class="emphasis"><em>service</em></span></td><td>A string expression containing the name of the service to invoke. This may be in the form module.attribute if the service is on a Roxie platform.</td></tr><tr><td><span class="emphasis"><em>instructure</em></span></td><td>A RECORD structure containing the input field definitions from which the XML input to the SOAP service is constructed. The name of the tags in the XML are derived from the names of the fields in the input record; this can be overridden by placing an xpath on the field ( {xpath('tagname')} &#8212; see the XPATH Support section of the RECORD Structure discussion). If the <span class="emphasis"><em>recset</em></span> parameter is not present, each field definition must contain a default value that will constitute the single input record. If the <span class="emphasis"><em>recset</em></span> parameter is present, each field definition must contain a default value unless a transform is also specified to supply that data values.</td></tr><tr><td><span class="emphasis"><em>transform</em></span></td><td>Optional. The TRANSFORM function to call to process the <span class="emphasis"><em>instructure</em></span> data. This eliminates the need to define default values for all fields in the <span class="emphasis"><em>instructure</em></span> RECORD structure. The transform function must take at least one parameter: a LEFT record of the same format as the input <span class="emphasis"><em>recset</em></span>. The resulting record set format must be the same as the input <span class="emphasis"><em>instructure</em></span>.</td></tr><tr><td><span class="bold"><strong>DATASET</strong></span> (<span class="emphasis"><em>outstructure</em></span>)</td><td>Specifies recordset <span class="emphasis"><em>result</em></span> in the <span class="emphasis"><em>outstructure</em></span> format.</td></tr><tr><td><span class="emphasis"><em>outstructure</em></span></td><td>A RECORD structure containing the output field definitions. If not used as a parameter to the DATASET keyword, this specifies a single record result. Each field definition in the RECORD structure must use an xpath attribute ( {xpath('tagname')} ) to eliminate case sensitivity issues.</td></tr><tr><td><span class="emphasis"><em>options</em></span></td><td>A comma-delimited list of optional specifications from the list below.</td></tr><tr><td><span class="bold"><strong>UNORDERED</strong></span></td><td>Optional. Specifies the output record order is not significant.</td></tr><tr><td><span class="bold"><strong>ORDERED</strong></span></td><td>Specifies the significance of the output record order.</td></tr><tr><td><span class="emphasis"><em>bool</em></span></td><td>When False, specifies the output record order is not significant. When True, specifies the default output record order.</td></tr><tr><td><span class="bold"><strong>STABLE</strong></span></td><td>Optional. Specifies the input record order is significant.</td></tr><tr><td><span class="bold"><strong>UNSTABLE</strong></span></td><td>Optional. Specifies the input record order is not significant.</td></tr><tr><td><span class="bold"><strong>PARALLEL</strong></span></td><td>Optional. Try to evaluate this activity in parallel.</td></tr><tr><td><span class="emphasis"><em>numthreads</em></span></td><td>Optional. Try to evaluate this activity using <span class="emphasis"><em>numthreads</em></span> threads.</td></tr><tr><td><span class="bold"><strong>ALGORITHM</strong></span></td><td>Optional. Override the algorithm used for this activity.</td></tr><tr><td><span class="emphasis"><em>name</em></span></td><td>The algorithm to use for this activity. Must be from the list of supported algorithms for the SORT function's STABLE and UNSTABLE options.</td></tr><tr><td>Return:</td><td>SOAPCALL returns either a set of records, a single record, or nothing.</td></tr></tbody></table></div><p><span class="bold"><strong>SOAPCALL<a class="indexterm" name="d0e29771"></a> </strong></span>is a function or action that calls a SOAP (Simple Object Access Protocol) service.</p><p>Valid <span class="emphasis"><em>options</em></span> are:</p><div class="informaltable"><table border="1"><colgroup><col width="23%"><col width="77%"></colgroup><tbody><tr><td><span class="bold"><strong>RETRY</strong></span><a class="indexterm" name="d0e29791"></a>(<span class="emphasis"><em>count</em></span>)</td><td>Specifies re-attempting the call count number of times if non-fatal errors occur. If omitted, the default is three (3).</td></tr><tr><td><span class="bold"><strong>TIMEOUT</strong></span><a class="indexterm" name="d0e29804"></a>(<span class="emphasis"><em>period</em></span>)</td><td>Specifies the amount of time to attempt the read before failing. The <span class="emphasis"><em>period</em></span> is a real number where the integer portion specifies seconds. Setting to zero (0) indicates waiting forever. If omitted, the default is three hundred (300).</td></tr><tr><td><span class="bold"><strong>TIMELIMIT</strong></span><a class="indexterm" name="d0e29820"></a>(<span class="emphasis"><em>period</em></span>)</td><td>Specifies the total amount of time allowed for the SOAPCALL. The <span class="emphasis"><em>period</em></span> is a real number where the integer portion specifies seconds. If omitted, the default is zero (0) indicating no limit.</td></tr><tr><td><span class="bold"><strong>HEADING<a class="indexterm" name="d0e29836"></a></strong></span>(<span class="emphasis"><em>prefix,suffix</em></span>)</td><td>Specifies tags to wrap around the XML input fields. If omitted, the default is: HEADING('','').</td></tr><tr><td><span class="bold"><strong>XPATH<a class="indexterm" name="d0e29849"></a></strong></span>(<span class="emphasis"><em>xpath</em></span>)</td><td>Specifies the path used to access rows in the output. If omitted, the default is: 'serviceResponse/Results/Result/Dataset/Row'.</td></tr><tr><td><span class="bold"><strong>MERGE<a class="indexterm" name="d0e29862"></a></strong></span>(<span class="emphasis"><em>n</em></span>)</td><td>Specifies processing n records per batch (the blocking). If omitted, the default is 1 (values other than 1 may be incompatible with non-Roxie services). Valid for use only if the <span class="emphasis"><em>recset</em></span> parameter is also present.</td></tr><tr><td><span class="bold"><strong>PARALLEL</strong></span><a class="indexterm" name="d0e29878"></a>(<span class="emphasis"><em>n</em></span>)</td><td>Specifies the number of concurrent threads to have processing Data Delivery Engine queries, to a maximum of 50 (the default is 2). This is intended to limit the number of concurrent sessions.</td></tr><tr><td><span class="bold"><strong>ONFAIL<a class="indexterm" name="d0e29891"></a></strong></span>(<span class="emphasis"><em>transform</em></span>)</td><td>Specifies either the transform function to call if the service fails for a particular record, or the keyword SKIP. The TRANSFORM function must produce a <span class="emphasis"><em>resultype</em></span> the same as the <span class="emphasis"><em>outstructure</em></span> and may use FAILCODE and/or FAILMESSAGE<a class="indexterm" name="d0e29906"></a> to provide details of the failure.</td></tr><tr><td><span class="bold"><strong>TRIM<a class="indexterm" name="d0e29914"></a></strong></span></td><td>Specifies all trailing spaces are removed from strings before output.</td></tr><tr><td><span class="bold"><strong>RESPONSE </strong></span>(<span class="emphasis"><em>NOTRIM</em></span>) <a class="indexterm" name="d0e29927"></a></td><td>Sets flag to prevent space stripping on the response.</td></tr><tr><td><span class="bold"><strong>NAMESPACE<a class="indexterm" name="d0e29936"></a> </strong></span>(<span class="emphasis"><em>namespace</em></span>)</td><td>Specifies the top level <span class="emphasis"><em>namespace</em></span> for the SOAP request.</td></tr><tr><td><span class="bold"><strong>LITERAL<a class="indexterm" name="d0e29953"></a></strong></span></td><td>Specifies the service is not necessarily implemented in ESP.</td></tr><tr><td><span class="bold"><strong>SOAPACTION<a class="indexterm" name="d0e29962"></a> </strong></span>(<span class="emphasis"><em>value</em></span>)</td><td>Specifies a <span class="emphasis"><em>value</em></span> where that <span class="emphasis"><em>value</em></span> is a string expression typically containing a URN or URL that is required by the web <span class="emphasis"><em>service</em></span> for proper interoperability.</td></tr><tr><td><span class="bold"><strong>LOG<a class="indexterm" name="d0e29985"></a></strong></span></td><td>If specified, writes details to the log file of the engine (hThor, Thor, or Roxie) to which the SOAPCALL is submitted.</td></tr><tr><td><span class="bold"><strong>LOG </strong></span>(<span class="emphasis"><em>MIN</em></span>)</td><td>Specifies to write minimal details of the SOAPCALL to a log file.</td></tr><tr><td><span class="bold"><strong>LOG </strong></span>(<span class="emphasis"><em>expression</em></span>)</td><td>Specifies to add the expression to the log when performing a SOAPCALL.</td></tr><tr><td><span class="bold"><strong>ENCODING</strong></span><a class="indexterm" name="d0e30014"></a></td><td>Specifies that the Web service being called requires a different message format, where type information is embedded in the XML.</td></tr><tr><td><span class="bold"><strong>HTTPHEADER<a class="indexterm" name="d0e30023"></a></strong></span></td><td>Specifies header information to be passed to the service.</td></tr></tbody></table></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="SIZEOF.html"><img src="images/prev.gif" alt="Prev"></a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="Built-in_Functions_and_Actions.html"><img src="images/up.gif" alt="Up"></a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="SOAPCALL_Function.html"><img src="images/next.gif" alt="Next"></a></td></tr><tr><td width="40%" align="left" valign="top">SIZEOF&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html"><img src="images/home.gif" alt="Home"></a></td><td width="40%" align="right" valign="top">&nbsp;SOAPCALL Function</td></tr></table></div></body></html>